## 8.4 集合

集合的特点：  
集合中不能有重复的元素，而且集合中的元素是无序的。跟列表是完全不同的。  
由于集合是无序的，所以集合没有下标索引。  

集合分为两种情况：  
可变集合和不可变集合。

### 8.4.1 创建可变集合

可变集合在创建之后是可以修改的，主要是对集合进行元素的添加和删除等操作。  
set([iterable])函数，或者用大括号{}  

例如：

	>>> a = {"刘备","关羽","张飞"}
	>>> a
	{'关羽', '张飞', '刘备'}
	>>> type(a)
	<class 'set'>
	
	>>> a = {"刘备","关羽","张飞","张飞"}
	>>> a
	{'关羽', '张飞', '刘备'}
	
	>>> set((1,2,3,4,5,6,7))
	{1, 2, 3, 4, 5, 6, 7}
	>>> set([1,2,3,4,5,6,7])
	{1, 2, 3, 4, 5, 6, 7}
	>>> set([1,2,3,4,5,6,7,7])
	{1, 2, 3, 4, 5, 6, 7}

### 8.4.2 修改可变集合

add(elem)  

添加元素，如果元素已经存在，则不能添加，不会抛出错误。  

例如：  

	>>> a = {"刘备","关羽","张飞"}
	>>> a.add("赵云")
	>>> a
	{'关羽', '张飞', '刘备', '赵云'}
	>>> a.add("赵云")
	>>> a
	{'关羽', '张飞', '刘备', '赵云'}

remove(elem)  

删除元素，如果元素不存在，则抛出错误。  

例如：  

	>>> a = {"刘备","关羽","张飞"}
	>>> a.add("君帅")
	>>> a
	{'君帅', '关羽', '张飞', '刘备'}
	>>> a.remove("君帅")
	>>> a
	{'关羽', '张飞', '刘备'}
	>>> a.remove("君帅")
	Traceback (most recent call last):
	  File "<pyshell#218>", line 1, in <module>
	    a.remove("君帅")
	KeyError: '君帅'

discard(elem)

删除元素，如果元素不存在，不会抛出错误。  

例如：  

	>>> a = {"刘备","关羽","张飞"}
	>>> a.discard("君帅")
	>>> a
	{'关羽', '张飞', '刘备'}

pop()

删除返回集合中任意一个元素，返回值是删除的元素。  
由于集合并不像列表是没有索引的，所以在集合中不会有带索引参数的pop()方法。  

例如：  

	>>> a = {"刘备","关羽","张飞"}
	>>> a.add("赵云")
	>>> a.add("马超")
	>>> a.add("黄忠")
	>>> a.add("诸葛亮")
	>>> a
	{'诸葛亮', '黄忠', '张飞', '关羽', '马超', '刘备', '赵云'}
	>>> a.pop()
	'诸葛亮'
	>>> a.pop()
	'黄忠'
	>>> a.pop()
	'张飞'
	>>> a
	{'关羽', '马超', '刘备', '赵云'}

clear()  

清除集合。  

例如：  

	>>> a = {'诸葛亮', '黄忠', '张飞', '关羽', '马超', '刘备', '赵云'}
	>>> a
	{'诸葛亮', '黄忠', '张飞', '关羽', '马超', '刘备', '赵云'}
	>>> a.clear()
	>>> a
    set()

### 8.4.3 遍历集合

遍历集合与遍历列表是类似的，可以通过for循环来执行。  
但是需要注意由于集合是无序的，没有索引，所以不能通过下表访问来获得元素。  

例如：  

	>>> a = {'诸葛亮', '黄忠', '张飞', '关羽', '马超', '刘备', '赵云'}
	>>> for item in a:
		print(item)
	
	诸葛亮
	黄忠
	张飞
	关羽
	马超
	刘备
	赵云
	
	>>> a = {'诸葛亮', '黄忠', '张飞', '关羽', '马超', '刘备', '赵云'}
	>>> for idx,x in enumerate(a):
		print("{0}-{1}".format(idx,x))
	
		
	0-诸葛亮
	1-黄忠
	2-张飞
	3-关羽
	4-马超
	5-刘备
	6-赵云

注意左侧的idx是遍历集合的顺序而不是下标索引，因为集合中的元素没有顺序即不会有下标索引。

### 8.4.4 不可变集合

不可变集合的类型是frozenset。  
利用构造函数frozenset([iterable])来进行创建，不能使用大括号{}。  

例如：
	>>> a = frozenset({"刘备","关羽","张飞","赵云","马超","黄忠"})
	>>> a
	frozenset({'马超', '刘备', '张飞', '赵云', '关羽', '黄忠'})
	>>> type(a)
	<class 'frozenset'>
	>>> a.add("诸葛亮")
	Traceback (most recent call last):
	  File "<pyshell#6>", line 1, in <module>
	    a.add("诸葛亮")
	AttributeError: 'frozenset' object has no attribute 'add'

### 8.4.5 集合推导式

集合推导式和列表推导式非常类似，用法也非常类似，只是集合推导式输出的是一个集合。  

例如  

	>>> n_set = {x ** 2 for x in range(10) if x % 2 == 0}
	>>> n_set
	{0, 64, 4, 36, 16}

只是将列表的中括号“[]”换成了大括号“{}”。

	>>> input_list = [2,3,4,5,6,7,7,7,7]
	>>> input_set = {2,3,4,5,6,7,7,7,7}
	>>> 
	>>> n_list = [x ** 2 for x in input_list]
	>>> n_set = {x ** 2 for x in input_set}
	>>> 
	>>> n_list
	[4, 9, 16, 25, 36, 49, 49, 49, 49]
	>>> n_set
	{4, 36, 9, 16, 49, 25}  

集合的推导式会将重复的元素都剔除掉，然后进行运算。